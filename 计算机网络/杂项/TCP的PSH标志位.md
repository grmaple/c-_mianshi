# 聊一聊TCP协议中的tcp push标志位

https://blog.csdn.net/javajiawei/article/details/81987949

PUSH标志位所表达的是发送方通知接收方传输层应该尽快的将这个报文段交给应用层。

传输层及以下的数据往往是由系统所带的协议栈进行处理的，客户端在收到一个个报文之后，经由协议栈解封装之后会立马把数据交给应用层去处理吗？如果说在收到报文之后立马就交给上层，这时候应用层由于数据不全，可能也不会进行处理。而且每来一个报文就交一次，效率很低。因此传输层一般会是隔几个报文，统一上交数据。什么时候上交数据呢，就是在发送方将PUSH标志位置1的时候。那么什么时候标志位会置1呢，通常是发送端觉得传输的数据应用层可以进行处理了的时候。

举个例子来说，TLS 协议中的的证书交换部分，通常证书链的大小在3K-4K左右，一般分三个报文来进行传输。只有当这3K-4K的报文传输完毕之后，那么数据形成完整的证书链，这个时候对于接收方才是有意义的（可以进行证书链的验证），单纯的一个报文无异于乱码。因此在TLS连接中，通常会发现证书的第三个报文同上设置了push位，是发送方来告知接收方，可以把数据送往tcp的上层了，因为这些报文已经组成了有意义的内容了。同样接收方在解析了TCP的PUSH字段后，也会清空自己的缓冲区，向上层交数据。



https://blog.csdn.net/qiuybing/article/details/39988393

​	发送端 : TCP将数据包置上PUSH标志时，表示这个数据应该被立即发送，而不要等待额外的数据。

​    接收端 : 接收端接受到带有PUSH标志的数据时，应该接接受缓存中收到的所有数据（包含当前带PUSH标示的数据包）应该立即提交到应用层。

​    当前没有API通知TCP哪些数据需要被设置PUSH标示，完全由TCP自行判断决定。

​     TCP是如何决策哪些数据需要被标示PUSH呢？

​     TCP依据当前将要被发送的包是不是发送缓存中最后一个未被发送的包，如果是那么这个包将被标志PUSH，所以我们经常发现在文件的传输开始或末尾一般都会有带PUSH标志的数据包，尤其FIN包。

​     为什么SYN 和 纯 ACK 不带PUSH标示，因为SYN 和纯 ACK 发送时不入队列。



https://blog.csdn.net/Y1730008223CONG/article/details/73539982

URG和PSH

1、 什么是URG？
URG是紧急标志位。当URG=1时，表示紧急指针有效，即此报文时紧急报文优先发送，不再按序发送。此时与后面的紧急指针配合，向后偏移至此报文处，发送此报文。

2、 URG的特点：
其紧急数据仅在报文中。

3、如何使用？
应与PSH配合使用。

4、什么是PSH？
催促标志位。当发送端将PSH置为1时，TCP就会立即创建一个报文并发送。接收端收到PSH为1的报文后就立即将接受缓冲区数据向上交付给应用程序，而不是等缓冲区满了才交付。

5、PSH的特点：
PSH的紧急报文不仅在报文中还在缓冲区内。

6、如何使用？
应与URG配合使用。

7、URG和PSH的区别：
URG是紧急标志位，当URG=1时，表示此报文段中含有紧急数据，并且紧急数据排在其他数据前面发送，当接收端收到此数据时必须先优先发送紧急数据，然后处理普通数据，而不是再按序发送。

PSH是催促标志位。当发送端将PSH置为1时，TCP就会立即创建一个报文并发送。接收端收到PSH为1的报文后就立即将接受缓冲区数据向上交付给应用程序，而不是等缓冲区满了才交付。

两者只是处理方法不一样而已。URG紧急数据仅在报文中，而PSH的紧急报文不仅在报文中还在缓冲区内。