## 死锁

死锁是指多个并发进程因争夺系统资源而产生相互等待的现象。

**本质原因：**

　　1）系统资源有限

　　2）进程推进顺序不合理

死锁发生的四个**必要条件**如下：

**互斥条件**：进程对所分配到的资源不允许其他进程访问，若其他进程访问该资源，只能等待，直至占有该资源的进程使用完成后释放该资源；

**请求和保持条件**：进程获得一定的资源后，又对其他资源发出请求，但是该资源可能被其他进程占有，此时请求阻塞，但该进程不会释放自己已经占有的资源

**不可剥夺条件**：进程已获得的资源，在未完成使用之前，不可被剥夺，只能在使用后自己释放

**环路等待条件**：进程发生死锁后，必然存在一个进程-资源之间的环形链

### **避免死锁的方法**

**1、死锁预防-----确保系统永远不会进入死锁状态**

 　产生死锁需要四个条件，那么，只要这四个条件中至少有一个条件得不到满足，就不可能发生死锁了。由于互斥条件是非共享资源所必须的，不仅不能改变，还应加以保证，所以，主要是破坏产生死锁的其他三个条件。

- 资源一次性分配，从而剥夺请求和保持条件
- 可剥夺资源：即当进程新的资源未得到满足时，释放已占有的资源，从而破坏不可剥夺的条件
- 资源有序分配法：系统给每类资源赋予一个序号，每个进程按编号递增的请求资源，释放则相反，从而破坏环路等待的条件

**2、避免死锁------在使用前进行判断，只允许不会产生死锁的进程申请资源**

死锁避免是利用额外的检验信息，在分配资源时判断是否会出现死锁，只在不会出现死锁的情况下才分配资源。

　　1、如果一个进程的请求会导致死锁，则不启动该进程。

　　2、如果一个进程的增加资源请求会导致死锁，则拒绝该申请。

避免死锁的具体实现通常利用银行家算法

**3、死锁检测与解除-------在检测到运行系统进入死锁，进行恢复。**

允许系统进入死锁，如果利用死锁检测算法检测出系统已经出现了死锁，那么，此时就需要对系统采取相应的措施。常用的解除死锁的方法：

　　1）抢占资源：从一个或多个进程中抢占足够数量的资源分配给死锁进程，以解除死锁状态。

　　2）终止（或撤销）进程：终止或撤销系统中的一个或多个死锁进程，直至打破死锁状态。