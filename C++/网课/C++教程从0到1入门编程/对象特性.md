## 对象特性

### 初始化列表

C++提供了初始化列表语法，用于初始化属性

```cpp
class B {
    B(int a):m_a(a){}
    //相当于B(int a){m_a = a;}
    int m_a;
}
```

### 将类对象作为类成员

C++类中的成员可以是另一个类的对象，我们称该成员是对象成员

```cpp
class A {};
class B {
    A a;
};
```

B类中有对象A作为成员，A为对象成员。

构造和析构顺序是怎么样的？

先构造类对象，再构造自身，由内到外。析构与之相反。

### static修饰静态成员

静态成员分为

- 静态成员变量
  - 在所有对象共享同一份数据
  - 在编译阶段分配内存
  - 在类内声明，类外初始化
- 静态成员函数
  - 所有对象共享同一个函数
  - 静态成员函数只能访问静态成员变量

### this指针

成员变量和成员函数是分开存储的。

每一个非静态成员函数只会诞生一份函数实例，也就是多个同类型的对象会共用同一块代码。

C++通过this指针让函数知道是谁调用它。

this指针指向被调用的成员函数所属的对象。

this指针是隐含在每一个非静态成员函数内的一种指针。

this指针不需要定义，直接可以使用。

this指针的用途：

- 当形参和成员变量同名时，可以用this指针来区别

  成员变量默认名字为this->m

- 在类的非静态成员函数中返回对象本身，可以使用return *this

### 空指针访问成员函数

空指针可以访问成员函数，但是不能使用成员变量。

如果使用成员变量会报错，因为是在用nullptr->m.

解决方法

在成员函数中加入if (this == nullptr) {return;}

如此可以保证代码的健壮性。

### const修饰成员函数

常函数

- 成员函数后加const后，我们称这个函数为常函数
- 常函数内不可以修改成员变量
- 成员变量声明时加mutable后，在常函数中依然可以修改

常对象

- 声明对象前加const称该对象为常对象
- 常对象只能调用常函数

